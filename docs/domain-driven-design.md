# DDD

## DDD(도메인 주도 설계) 핵심 개념

### DDD란 무엇인가?

DDD는 복잡한 비즈니스 도메인을 효과적으로 모델링하기 위한 접근 방식으로, 다음과 같은 목표를 가집니다.

- 비즈니스 도메인을 코드에 정확히 반영
- 도메인 전문가와 개발자 간의 효과적인 협업
- 변화에 유연하게 대응할 수 있는 소프트웨어 설계

### DDD의 핵심 구성 요소

| 구성 요소         | 설명                                          | 주요 특징                                                                                  |
| ----------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------ |
| 유비쿼터스 언어   | 도메인 전문가와 개발자가 공유하는 공통 언어   | • 모든 이해관계자가 이해할 수 있음<br>• 코드와 문서에 일관되게 반영됨                      |
| 바운디드 컨텍스트 | 특정 도메인 모델이 적용되는 명확한 경계       | • 동일한 용어가 컨텍스트 내에서 일관된 의미를 가짐<br>• 각 컨텍스트는 독립적으로 개발 가능 |
| 엔티티            | 고유 식별자로 구분되는 객체                   | • ID로 식별됨<br>• 생명주기를 가짐<br>• 상태가 변할 수 있음                                |
| 값 객체           | 속성의 값으로만 의미를 갖는 불변 객체         | • ID가 없음<br>• 불변성<br>• 개념적 완전함                                                 |
| 애그리게잇        | 트랜잭션 일관성을 유지해야 하는 객체들의 집합 | • 루트 엔티티를 통해 접근<br>• 일관성 경계 형성<br>• 외부에서는 ID로만 참조                |
| 도메인 서비스     | 특정 엔티티에 속하지 않는 도메인 로직         | • 상태를 가지지 않음<br>• 여러 엔티티에 걸친 연산 수행                                     |
| 레포지토리        | 도메인 객체의 저장소                          | • 컬렉션과 유사한 인터페이스<br>• 영속성 메커니즘 추상화                                   |
| 도메인 이벤트     | 도메인에서 발생한 중요한 사건                 | • 시스템 간 결합도 감소<br>• 비동기 처리 가능                                              |

### 도메인 모델링 결정 가이드

**엔티티 vs 값 객체 결정**

```text
질문 1: 객체가 고유 식별자를 필요로 하는가?
├── 예: 엔티티로 모델링 고려
└── 아니오: 다음 질문으로

질문 2: 객체의 속성이 변경될 수 있는가?
├── 예: 엔티티로 모델링 고려
└── 아니오: 값 객체로 모델링 고려

질문 3: 객체가 다른 객체와의 관계를 가지는가?
├── 예: 엔티티로 모델링 고려
└── 아니오: 값 객체로 모델링 고려
```

**애그리게잇 경계 설정 체크리스트**

- [ ] 함께 생성되고 수정되는 객체들인가?
- [ ] 트랜잭션 일관성이 필요한 객체들인가?
- [ ] 비즈니스 규칙이 객체들 간에 적용되는가?
- [ ] 애그리게잇 크기가 관리 가능한 수준인가?

### DDD 구현 시 주의사항

- **애그리게잇은 작게 유지하라**: 큰 애그리게잇은 성능 문제와 동시성 충돌을 야기할 수 있습니다.
- **값 객체는 불변으로 설계하라**: 값 객체의 변경이 필요하면 새 객체를 생성하세요.
- **도메인 로직은 도메인 계층에 유지하라**: 애플리케이션 계층이나 인프라 계층으로 도메인 로직이 새지 않도록 주의하세요.
- **유비쿼터스 언어를 코드에 반영하라**: 코드의 클래스, 메서드, 변수 이름은 도메인 용어를 사용하세요.
